---
title: Пакет создания документации для Visual Studio Code
description: В этой статье описывается пакет расширений Visual Studio Code, который упрощает использование языка разметки Markdown для написания статей на сайте docs.microsoft.com.
ms.topic: contributor-guide
ms.prod: non-product-specific
ms.custom: external-contributor-guide
author: meganbradley
ms.author: mbradley
ms.date: 03/05/2020
ms.openlocfilehash: 5bbf51af52069d5636715ffb2bd3f59bf459d5b9
ms.sourcegitcommit: dbc2c48194e29bfa0c88d33f50f94b9ee26be2da
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2020
ms.locfileid: "78336390"
---
# <a name="docs-authoring-pack-for-vs-code"></a>Пакет создания документации для VS Code

Пакет создания документации (Docs Authoring Pack) представляет собой набор расширений VS Code, упрощающих использование языка разметки Markdown для написания статей на сайте docs.microsoft.com. Пакет [доступен в VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=docsmsft.docs-authoring-pack) и содержит следующие расширения.

> [!div class="checklist"]
> * [Docs Markdown](https://marketplace.visualstudio.com/items?itemName=docsmsft.docs-markdown). Рекомендации по использованию языка разметки Markdown для создания содержимого на сайте docs.microsoft.com (Документация), включая базовую поддержку Markdown и поддержку настраиваемого синтаксиса Markdown на сайте Документации, например оповещений, фрагментов кода и нелокализуемого текста. Теперь также включает базовую помощь по созданию YAML, например вставку записей оглавления.
> * [markdownlint](https://marketplace.visualstudio.com/items?itemName=DavidAnson.vscode-markdownlint). Разработанный Дэвидом Энсоном (David Anson) популярный анализатор кода Markdown для проверки соблюдения стандартов оформления кода.
> * [Code Spell Checker](https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker). Полностью автономное средство проверки орфографии от компании Street Side Software.
> * [Docs Preview](https://marketplace.visualstudio.com/items?itemName=docsmsft.docs-preview). Использование каскадных таблиц стилей на сайте docs.microsoft.com для более точного предварительного просмотра разметки Markdown, в том числе пользовательской.
> * [Docs Article Templates](https://marketplace.visualstudio.com/items?itemName=docsmsft.docs-article-templates). Расширение, с помощью которого пользователи могут создавать шаблоны модулей Learn и применять основное содержимое Markdown в новых файлах.
> * [Docs YAML](https://marketplace.visualstudio.com/items?itemName=docsmsft.docs-yaml). Предоставляет проверку схемы и автоматическое завершение для YAML на сайте Документации.
> * [Docs Images](https://marketplace.visualstudio.com/items?itemName=docsmsft.docs-images). Обеспечивает сжатие изображений и изменение размера для папок и отдельных файлов, чтобы помочь авторам docs.microsoft.com.

## <a name="prerequisites-and-assumptions"></a>Предварительные требования и предположения

Чтобы вы могли вставлять относительные ссылки, изображения и другое внедренное содержимое с помощью расширения Docs Markdown, ваша рабочая область VS Code должна быть определена в рамках корня клонированного репозитория Open Publishing System (OPS). Например, если вы клонировали репозиторий документации в `C:\git\SomeDocsRepo\`, откройте эту папку или вложенную папку в VS Code: меню **Файл** > **Открыть папку** или `code C:\git\SomeDocsRepo\` в командной строке.

Некоторый поддерживаемый расширением синтаксис, например для оповещений и фрагментов кода, является настраиваемым синтаксисом Markdown для OPS. Пользовательская разметка Markdown не будет правильно отображаться, если она не опубликована с помощью OPS.

## <a name="how-to-use-the-docs-markdown-extension"></a>Использование расширения Docs Markdown

Чтобы открыть меню **Docs Markdown**, введите <kbd>ALT+M</kbd>. Чтобы выбрать нужную команду, можно щелкнуть по ней или воспользоваться стрелками вверх и вниз. Кроме того, можно ввести слово, чтобы начать фильтрацию, а затем нажать клавишу <kbd>ВВОД</kbd>, когда нужная функция будет выделена в меню.

Актуальный список команд см. в [файле сведений по Docs Markdown](https://marketplace.visualstudio.com/items?itemName=docsmsft.docs-markdown).

## <a name="how-to-generate-a-master-redirect-file"></a>Создание главного файла перенаправления

Расширение Docs Markdown содержит сценарий для создания или обновления главного файла перенаправления для репозитория на основе метаданных `redirect_url` в отдельных файлах. Этот сценарий проверяет каждый файл Markdown в репозитории на `redirect_url`, добавляет метаданные перенаправления в главный файл перенаправления ( *.openpublishing.redirection.json*) для репозитория и перемещает перенаправленные файлы в папку за пределами репозитория. Чтобы запустить этот скрипт, выполните указанные ниже действия.

1. Нажмите <kbd>F1</kbd>, чтобы открыть палитру команд VS Code.
2. Начните вводить "Docs: Generate..."
3. Выберите команду `Docs: Generate master redirection file`.
4. По завершении сценария результаты перенаправления отобразятся в области вывода VS Code, а удаленные файлы Markdown будут добавлены в папку Docs Authoring\redirects в пути по умолчанию.
5. Просмотр результатов Если получены ожидаемые результаты, отправьте запрос на вытягивание для обновления репозитория.

## <a name="how-to-assign-keyboard-shortcuts"></a>Назначение сочетаний клавиш

1. Введите <kbd>CTRL+K</kbd>, а затем <kbd>Ctrl+S</kbd>, чтобы открыть список **Сочетания клавиш**.
1. Найдите команду, например `formatBold`, для которой нужно создать настраиваемое сочетание клавиш.
1. Нажмите значок "плюс", отображаемый рядом с именем команды при наведении указателя мыши на строку.
1. В появившемся поле введите сочетание клавиш для привязки к этой конкретной команде. Например, чтобы использовать стандартное сочетание клавиш для полужирного начертания, введите <kbd>Ctrl+B</kbd>.
1. Чтобы настраиваемое сочетание клавиш было доступно только в файлах Markdown, в него рекомендуется вставить предложение `when`. Для этого откройте файл *keybindings.json* и под именем команды вставьте следующую строку (не забудьте добавить запятую между строками).

    `"when": "editorTextFocus && editorLangId == 'markdown'"`

    Окончательное настраиваемое сочетание клавиш должно иметь следующий вид в *keybindings.json*:

    ```json
    [
        {
            "key": "ctrl+b",
            "command": "formatBold",
            "when": "editorTextFocus && editorLangId == 'markdown'"
        }
    ]
    ```

    > [!TIP]
    > Поместите свои настраиваемые сочетания клавиш в этот файл, чтобы перезаписать значения по умолчанию

1. Сохраните файл *keybindings.json*.

Дополнительные сведения о настраиваемых сочетаниях клавиш см. в [документации по VS Code](https://code.visualstudio.com/docs/getstarted/keybindings).

## <a name="how-to-show-the-legacy-gauntlet-toolbar"></a>Отображение устаревшей панели инструментов "Gauntlet"

Прежние пользователи расширения с кодовым названием "Gauntlet" заметят, что при установленном расширении Docs Markdown панель инструментов разработки больше не отображается в нижней части окна VS Code. Панель занимала много места в строке состояния VS Code и не соответствовала рекомендациям по работе с расширением, поэтому она не поддерживается в новом расширении. Но при необходимости панель инструментов можно открыть, изменив файл settings.json в VS Code следующим образом.

1. В VS Code перейдите в раздел **Файл** > **Настройки** > **Параметры** или нажмите <kbd>CTRL +,</kbd>.
1. Выберите **Параметры пользователя**, чтобы изменить параметры всех рабочих областей VS Code, или **Параметры рабочей области**, чтобы изменить параметры только текущей рабочей области.
1. Выберите **Расширения** > **Конфигурация расширения Docs Markdown**, а затем выберите **Показывать панель инструментов прежних версий в нижней строке состояния**.

   ![Показывать параметры панели инструментов прежних версий в VS Code](docs-authoring/media/show-gauntlet-bar.png)

Когда вы сделаете выбор, VS Code обновит файл *settings.json*. После этого будет предложено перезагрузить окно, чтобы изменения вступили в силу.

Новые команды, добавленные в расширение, не будут доступны на панели инструментов.

## <a name="how-to-use-docs-templates"></a>Использование шаблонов Docs

С помощью расширения Docs Article Templates создатели в VS Code могут вытягивать шаблоны Markdown из централизованного хранилища и применять их к файлам. Шаблоны обеспечивают включение необходимых метаданных в статьи, соблюдение стандартов, касающихся содержимого, и т. д. В общедоступном репозитории GitHub управление шаблонами осуществляется по принципу управления файлами Markdown.

### <a name="to-apply-a-template-in-vs-code"></a>Применение шаблона в VS Code

1. Убедитесь, что расширение Docs Article Templates установлено и включено.
1. Если расширение Docs Markdown не установлено, нажмите клавишу <kbd>F1</kbd>, чтобы открыть палитру команд, начните вводить слово template для фильтрации, а затем щелкните `Docs: Template`. Если расширение Docs Markdown установлено, вы можете использовать палитру команд или щелкнуть сочетание клавиш <kbd>Alt+M</kbd>, чтобы вызвать меню Docs Markdown QuickPick, а затем выбрать `Template` в списке.
1. В открывшемся списке выберите нужный шаблон.

### <a name="to-add-your-github-id-andor-microsoft-alias-to-your-vs-code-settings"></a>Добавление вашего идентификатора GitHub и (или) псевдонима Майкрософт в параметры VS Code

Расширение Templates поддерживает три поля динамических метаданных: author, ms.author и ms.date. Это означает, что если автор шаблона использует эти поля в заголовке метаданных в шаблоне Markdown, они будут автоматически заполняться в файле, когда вы применяете шаблон:

| Поле метаданных | Значение |
|--|--|
| `author` | Ваш псевдоним GitHub, если он указан в файле параметров VS Code. |
| `ms.author` | Ваш псевдоним Майкрософт, если он указан в файле параметров VS Code. Если вы не сотрудник корпорации Майкрософт, его указывать не нужно. |
| `ms.date` | Текущая дата, указанная в формате, который поддерживается расширением Docs, — `MM/DD/YYYY`. Дата не изменяется автоматически при следующем обновлении файла. Ее необходимо изменить вручную. Это поле используется для указания актуальности статьи. |

### <a name="to-set-author-andor-msauthor"></a>Указание автора и/или ms.author

1. В VS Code перейдите в раздел **Файл** > **Настройки** > **Параметры** или нажмите <kbd>CTRL +,</kbd>.
1. Выберите **Параметры пользователя**, чтобы изменить параметры всех рабочих областей VS Code, или **Параметры рабочей области**, чтобы изменить параметры только текущей рабочей области.
1. На расположенной слева панели "Параметры по умолчанию" найдите параметр **Конфигурация расширения Docs Article Templates**, щелкните значок карандаша рядом с нужным параметром, а затем щелкните "Заменить в параметрах".
1. Рядом откроется панель параметров **Пользователь**, и новая запись отобразится в ее нижней части.
1. Добавьте ваш идентификатор GitHub или псевдоним для электронной почты Майкрософт и сохраните файл.
1. Чтобы изменения вступили в силу, может потребоваться закрыть и перезапустить VS Code.
1. Теперь, когда применяется шаблон с использованием динамических полей, ваш идентификатор GitHub и (или) псевдоним Майкрософт будет автоматически указываться в заголовке метаданных.

### <a name="to-make-a-new-template-available-in-vs-code"></a>Чтобы сделать новый шаблон доступным в VS Code

1. Создание черновика шаблона в виде файла Markdown.
1. Отправьте запрос на вытягивание в папку шаблонов в репозитории [MicrosoftDocs/content-templates](https://github.com/MicrosoftDocs/content-templates).

Команда docs.microsoft.com просмотрит шаблон и выполнит слияние запроса на вытягивание, если он соответствует рекомендациям по стилю docs.microsoft.com. После слияния шаблон будет доступен всем пользователям расширения Docs Article Templates.

## <a name="demo-several-features"></a>Демонстрация нескольких функций

Ниже приведен краткий видеоролик, демонстрирующий следующие возможности Docs Authoring Pack.

* **Файлы YAML**
  * Поддержка следующей функции: "Документация: ссылка на файл в репозитории"
* **Файлы Markdown**
  * Обновление параметра контекстного меню значений метаданных "ms.date"
  * Поддержка автоматического завершения кода для идентификаторов языков блоков кода
  * Предупреждения о нераспознанном идентификаторе языка блоков кода или поддержка автоматического исправления
  * Сортировка выделенного фрагмента по возрастанию (от А до Я)
  * Сортировка выделенного фрагмента по убыванию (от Я до А)

> [!VIDEO https://www.youtube.com/embed/6zfbBRdjlw8]

## <a name="contribution-expectations"></a>Ожидания от участников

Расширение Docs Authoring Pack — это открытый исходный код, который могут использовать все участники с учетной записью GitHub. Существует специализированная внутренняя группа Майкрософт, которая активно работает над этим проектом. Эта группа отслеживает проблемы и запросы на вытягивание. Соглашение об уровне обслуживания (SLA) и сроки рассмотрения запроса на вытягивание в настоящее время составляют одну неделю. Группа предпринимает усилия по автоматизации, чтобы сократить это время.

## <a name="next-steps"></a>Дальнейшие действия

Изучите различные функции, доступные в Docs Authoring Pack — расширении Visual Studio Code.

* [Выполнение языка разработки](docs-authoring/dev-lang-completion.md)
* [Сжатие изображений](docs-authoring/image-compression.md)
* [Обновления метаданных](docs-authoring/metadata-updates.md)
* [Переформатирование таблиц](docs-authoring/reformat-table.md)
* [Замена парных кавычек](docs-authoring/smart-quote-replacement.md)
* [Сортировка перенаправлений](docs-authoring/sort-redirects.md)
* [Сортировка выделенных фрагментов](docs-authoring/sort-selection.md)
